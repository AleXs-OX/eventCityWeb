<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
    
    <h:outputStylesheet library="css" name="eventosUI.css"/>
        
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <div class="text">
            <!--<h4>Pagina principal de eventos</h4>-->
        </div>
    </h:head>

    <h:body>
        <div class="publicaciones">   
                <div class="grid-container">
                    <!--<h:form>-->
                    
                    <p:dataTable  rowStyleClass="colorTable" styleClass="data-table" id="t_publicaciones1" value="#{publicadorController.eventoConciertos}" var="evento">
                        <p:column headerText="Conciertos">
                                <p:card class="card_evento" style="width: 16.6em">
                                    <f:facet name="title">
                                        <p> #{evento.titulo}</p>
                                    </f:facet>
                                    <f:facet name="subtitle">
                                        <p>#{evento.descripcion}</p>
                                        <p style="font-style: italic; color: black">
                                        Hora #{evento.horaEvento}<br></br>
                                        Dia #{evento.fechaEvento}<br></br></p>
                                        <p style="font-style: italic; color: black">#{evento.localizacion.nombre}</p>
                                    </f:facet>
                                    <f:facet name="footer">
                                        <p:commandButton id="btn-info_1" icon="pi pi-star-fill" value="Información" styleClass="ui-button-raised ui-button-secondary btn_card" style="margin-left: .5em"/>
                                        <p:overlayPanel for="btn-info_1" showCloseIcon="true">
                                            <p:card class="card_resena">
                                                <f:facet name="title">
                                                    <p style ="text-align: center">¿Localización y día?</p>                                   
                                                </f:facet>
                                                <f:facet name="subtitle">
                                                    <p style="font-weight: bold; font-style: italic; color: gray;">
                                                        <br></br>El evento #{evento.titulo} tendrá lugar en:<br></br>
                                                        #{evento.localizacion.direccion}. <br></br><br></br> El día: #{evento.fechaEvento}</p>   
                                                </f:facet>
                                                <p>Hora: #{evento.horaEvento}</p>
                                                <p>Precio: #{evento.precio}€</p>
                                                <p></p>
                                                <p:dataList value="#{publicadorController.getResenasByEvento(evento.idEvento)}" var="resena" type="definition">  
                                                        <div class="resena_image">
                                                            <div class="resena_lista">
                                                                <div class="resena_nombre">#{resena.suscriptor.usuario.nombreCompleto}</div>
                                                                <div class="resena_desc">#{resena.comentario}</div>
                                                                <p:rating readonly="true" value="#{publicadorController.getPuntuacionByIdSuscriptorAndIdEvento(resena.suscriptor.idSubscriptor, evento.idEvento)}"/>
                                                            </div>
                                                        </div>                           
                                                </p:dataList>
                                            </p:card>
                                        </p:overlayPanel>
                                    </f:facet>
                                </p:card>
                            </p:column>
                        <!-- más columnas -->
                    </p:dataTable>
                    <p:dataTable  rowStyleClass="colorTable" styleClass="data-table" id="t_publicaciones2" value="#{publicadorController.eventoTalleresyClases}" var="evento">
                        <p:column headerText="Talleres y Clases">
                            <p:card class="card_evento" style="width: 16.6em">
                                    <f:facet name="title">
                                        <p> #{evento.titulo}</p>
                                    </f:facet>
                                    <f:facet name="subtitle">
                                        <p>#{evento.descripcion}</p>
                                        <p style="font-style: italic; color: black">
                                        Hora #{evento.horaEvento}<br></br>
                                        Dia #{evento.fechaEvento}<br></br></p>
                                        <p style="font-style: italic; color: black">#{evento.localizacion.nombre}</p>
                                    </f:facet>
                                    <f:facet name="footer">
                                        <p:commandButton id="btn-info_2" icon="pi pi-star-fill" value="Información" styleClass="ui-button-raised ui-button-secondary btn_card" style="margin-left: .5em"/>
                                        <p:overlayPanel for="btn-info_2" showCloseIcon="true">
                                            <p:card class="card_resena">
                                                <f:facet name="title">
                                                    <p style ="text-align: center">¿Localización y día?</p>                                   
                                                </f:facet>
                                                <f:facet name="subtitle">
                                                    <p style="font-weight: bold; font-style: italic; color: gray;">
                                                        <br></br>El evento #{evento.titulo} tendrá lugar en:<br></br>
                                                        #{evento.localizacion.direccion}. <br></br><br></br> El día: #{evento.fechaEvento}</p> 
                                                </f:facet>
                                                <p>Hora: #{evento.horaEvento}</p>
                                                <p>Precio: #{evento.precio}€</p>
                                                <p></p>
                                                <p:dataList value="#{publicadorController.getResenasByEvento(evento.idEvento)}" var="resena" type="definition">  
                                                        <div class="resena_image">
                                                            <div class="resena_lista">
                                                                <div class="resena_nombre">#{resena.suscriptor.usuario.nombreCompleto}</div>
                                                                <div class="resena_desc">#{resena.comentario}</div>
                                                                <p:rating readonly="true" value="#{publicadorController.getPuntuacionByIdSuscriptorAndIdEvento(resena.suscriptor.idSubscriptor, evento.idEvento)}"/>
                                                            </div>
                                                        </div>                           
                                                </p:dataList>
                                            </p:card>
                                        </p:overlayPanel>
                                    </f:facet>
                                </p:card>
                        </p:column>
                        <!-- más columnas -->
                    </p:dataTable>
                    <p:dataTable  rowStyleClass="colorTable" styleClass="data-table" id="t_publicaciones3" value="#{publicadorController.eventoCompeticionesyTorneos}" var="evento">
                        <p:column headerText="Talleres y Clases">
                            <p:card class="card_evento" style="width: 16.6em">
                                    <f:facet name="title">
                                        <p> #{evento.titulo}</p>
                                    </f:facet>
                                    <f:facet name="subtitle">
                                        <p>#{evento.descripcion}</p>
                                        <p style="font-style: italic; color: black">
                                        Hora #{evento.horaEvento}<br></br>
                                        Dia #{evento.fechaEvento}<br></br></p>
                                        <p style="font-style: italic; color: black">#{evento.localizacion.nombre}</p>
                                    </f:facet>
                                    <f:facet name="footer">
                                        <p:commandButton id="btn-info_2" icon="pi pi-star-fill" value="Información" styleClass="ui-button-raised ui-button-secondary btn_card" style="margin-left: .5em"/>
                                        <p:overlayPanel for="btn-info_2" showCloseIcon="true">
                                            <p:card class="card_resena">
                                                <f:facet name="title">
                                                    <p style ="text-align: center">¿Localización y día?</p>                                   
                                                </f:facet>
                                                <f:facet name="subtitle">
                                                    <p style="font-weight: bold; font-style: italic; color: gray;">
                                                        <br></br>El evento #{evento.titulo} tendrá lugar en:<br></br>
                                                        #{evento.localizacion.direccion}. <br></br><br></br> El día: #{evento.fechaEvento}</p> 
                                                </f:facet>
                                                <p>Hora: #{evento.horaEvento}</p>
                                                <p>Precio: #{evento.precio}€</p>
                                                <p></p>
                                                <p:dataList value="#{publicadorController.getResenasByEvento(evento.idEvento)}" var="resena" type="definition">  
                                                        <div class="resena_image">
                                                            <div class="resena_lista">
                                                                <div class="resena_nombre">#{resena.suscriptor.usuario.nombreCompleto}</div>
                                                                <div class="resena_desc">#{resena.comentario}</div>
                                                                <p:rating readonly="true" value="#{publicadorController.getPuntuacionByIdSuscriptorAndIdEvento(resena.suscriptor.idSubscriptor, evento.idEvento)}"/>
                                                            </div>
                                                        </div>                           
                                                </p:dataList>
                                            </p:card>
                                        </p:overlayPanel>
                                    </f:facet>
                                </p:card>
                        </p:column>
                        <!-- más columnas -->
                    </p:dataTable>
                    <p:dataTable  rowStyleClass="colorTable" styleClass="data-table" id="t_publicaciones4" value="#{publicadorController.eventoMiscelaneo}" var="evento">
                        <p:column headerText="Talleres y Clases">
                            <p:card class="card_evento" style="width: 16.6em">
                                    <f:facet name="title">
                                        <p> #{evento.titulo}</p>
                                    </f:facet>
                                    <f:facet name="subtitle">
                                        <p>#{evento.descripcion}</p>
                                        <p style="font-style: italic; color: black">
                                        Hora #{evento.horaEvento}<br></br>
                                        Dia #{evento.fechaEvento}<br></br></p>
                                        <p style="font-style: italic; color: black">#{evento.localizacion.nombre}</p>
                                    </f:facet>
                                    <f:facet name="footer">
                                        <p:commandButton id="btn-info_2" icon="pi pi-star-fill" value="Información" styleClass="ui-button-raised ui-button-secondary btn_card" style="margin-left: .5em"/>
                                        <p:overlayPanel for="btn-info_2" showCloseIcon="true">
                                            <p:card class="card_resena">
                                                <f:facet name="title">
                                                    <p style ="text-align: center">¿Localización y día?</p>                                   
                                                </f:facet>
                                                <f:facet name="subtitle">
                                                   <p style="font-weight: bold; font-style: italic; color: gray;">
                                                        <br></br>El evento #{evento.titulo} tendrá lugar en:<br></br>
                                                        #{evento.localizacion.direccion}. <br></br><br></br> El día: #{evento.fechaEvento}</p> 
                                                </f:facet>
                                                <p>Hora: #{evento.horaEvento}</p>
                                                <p>Precio: #{evento.precio}€</p>
                                                <p></p>
                                                <p:dataList value="#{publicadorController.getResenasByEvento(evento.idEvento)}" var="resena" type="definition">  
                                                        <div class="resena_image">
                                                            <div class="resena_lista">
                                                                <div class="resena_nombre">#{resena.suscriptor.usuario.nombreCompleto}</div>
                                                                <div class="resena_desc">#{resena.comentario}</div>
                                                                <p:rating readonly="true" value="#{publicadorController.getPuntuacionByIdSuscriptorAndIdEvento(resena.suscriptor.idSubscriptor, evento.idEvento)}"/>
                                                            </div>
                                                        </div>                           
                                                </p:dataList>
                                            </p:card>
                                        </p:overlayPanel>
                                    </f:facet>
                                </p:card>
                        </p:column>
                        <!-- más columnas -->
                    </p:dataTable>
                    <!--</h:form>-->
                    <h:form id="formCalendar">
                    <div class="calendar">
                        <p:calendar mode="inline" id="calendario" value="#{publicadorController.dateSeleccionada}" locale = "es" navigator ="true" showOn="button" pattern="dd/MM/yyyy">
                            <p:ajax event="dateSelect" update="t_publicaciones1 t_publicaciones2 t_publicaciones3"
                                    />
                        </p:calendar>
                    </div> 
                    </h:form>
                        <h:form>  
                        <div class="botones">
                            <p:commandButton value="Perfil" style="position: fixed; top: 10.5%; right: 0; margin-top: 0.5%; margin-right: 12.5%; font-size: 1em;" />
                            <p:commandButton value="Cerrar sesión" styleClass="ui-button-info" action="#{publicadorController.logout()}" style="position: fixed; top: 10.5%; right: 0; margin-top: 0.5%; margin-right: 3.5%; font-size: 1em;" />
                            <p:commandButton value="Crear Evento" styleClass="ui-button-raised ui-button-success" action="#{publicadorController.irCreaEvento()}" style="position: fixed; top: 70%; right: 0; margin-top: 0.5%; margin-right: 8%; font-size: 1em;" />
                            <p:outputLabel class="labelNombre" value="#{suscriptorController.nombreCompleto}" style="position: fixed; top: 5.5%; right: 0; margin-top: 0.5%; margin-right: 3.6%" />
                        </div>
                    </h:form>
                </div>
        </div>
    </h:body>
</html>